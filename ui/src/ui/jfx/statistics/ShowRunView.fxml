<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.SVGPath?>

<VBox xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="ui.jfx.statistics.ShowRunController"
      spacing="12.0" prefWidth="600.0" prefHeight="500.0"
      stylesheets="@ShowRunView.css" styleClass="root">

    <padding>
        <Insets top="16.0" bottom="16.0" left="16.0" right="16.0"/>
    </padding>

    <children>
        <!-- Header section with execution info -->
        <VBox spacing="8.0">
            <children>
                <Label fx:id="titleLabel" text="Execution Results" styleClass="header-label"/>

                <HBox spacing="16.0" alignment="CENTER_LEFT">
                    <children>
                        <Label fx:id="executionInfoLabel" text="Execution #1" styleClass="info-label"/>
                        <Separator orientation="VERTICAL" prefHeight="20.0"/>
                        <Label fx:id="expandLevelLabel" text="Expand Level: 0" styleClass="info-label"/>
                        <Separator orientation="VERTICAL" prefHeight="20.0"/>
                        <Label fx:id="cyclesLabel" text="Cycles: 0" styleClass="info-label"/>
                        <Separator orientation="VERTICAL" prefHeight="20.0"/>
                        <Label fx:id="resultLabel" text="Result: 0" styleClass="info-label"/>
                    </children>
                </HBox>
            </children>
        </VBox>

        <!-- Arguments section -->
        <VBox spacing="8.0">
            <children>
                <Label text="Program Arguments:" styleClass="section-header"/>
                <Label fx:id="argumentsLabel" text="No arguments" styleClass="content-label" wrapText="true"/>
            </children>
        </VBox>

        <!-- Variables table section -->
        <VBox spacing="8.0" VBox.vgrow="ALWAYS">
            <children>
                <Label text="Final Variable States:" styleClass="section-header"/>

                <TableView fx:id="variablesTable" VBox.vgrow="ALWAYS" styleClass="variables-table">
                    <columns>
                        <TableColumn fx:id="variableNameColumn" text="Variable Name" prefWidth="250.0"/>
                        <TableColumn fx:id="variableValueColumn" text="Final Value" prefWidth="150.0"/>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                    <placeholder>
                        <Label text="No variables to display" styleClass="placeholder-label"/>
                    </placeholder>
                </TableView>
            </children>
        </VBox>

        <!-- Action buttons -->
        <HBox spacing="12.0" alignment="CENTER">
            <children>
                <Button fx:id="rerunButton" text="Re-run This Execution" onAction="#handleRerun"
                        prefWidth="180.0" prefHeight="35.0">
                    <graphic>
                        <HBox alignment="CENTER" spacing="4.0">
                            <children>
                                <SVGPath content="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"
                                         fill="#ffffff" scaleX="0.7" scaleY="0.7"/>
                                <Label text="Re-run" style="-fx-text-fill: white;"/>
                            </children>
                        </HBox>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Re-run with the same parameters and expand level"/>
                    </tooltip>
                </Button>

                <Button fx:id="closeButton" text="Close" onAction="#handleClose"
                        prefWidth="100.0" prefHeight="35.0">
                    <graphic>
                        <SVGPath content="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                                 fill="#ffffff" scaleX="0.7" scaleY="0.7"/>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Close this window"/>
                    </tooltip>
                </Button>
            </children>
        </HBox>
    </children>
</VBox>